<!doctype html>
<html lang="he">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>×ª×¤×¨×™×˜ ×¤×™×¦×” - ×”×–×× ×” ×•×ª×©×œ×•×</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;direction:rtl;padding:16px;background:#fff;color:#111}
    .card{max-width:720px;margin:0 auto;border:1px solid #e6e6e6;padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.03)}
    h1{margin:0 0 8px;font-size:1.4rem}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    label{display:block;margin-bottom:6px}
    .item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
    .toppings{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .topping{padding:6px 8px;border:1px solid #ddd;border-radius:6px;font-size:0.95rem}
    .total{font-weight:700;font-size:1.2rem;margin-top:12px}
    button{padding:10px 14px;border-radius:8px;border:0;font-weight:700;cursor:pointer}
    .pay{background:#28a745;color:white}
    .note{font-size:0.85rem;color:#666;margin-top:8px}
    input[type="number"]{width:80px;padding:6px;border-radius:6px;border:1px solid #ccc}
    @media(max-width:420px){.row{flex-direction:column;align-items:stretch} input[type="number"]{width:100%}}
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ• ×ª×¤×¨×™×˜ ×¤×™×¦×” â€” ×”×–×× ×” ××”×™×¨×”</h1>
    <p class="note">×‘×—×¨×• ×¤×™×¦×”, ×ª×•×¡×¤×•×ª ×•×›×ª×•×‘×ª. ×œ×—×¦×• ×¢×œ "×—×©×‘ ×•×ª×©×œ×•×" ×›×“×™ ×œ×¨××•×ª ××ª ×”×¡×›×•× ×•××– ×”××©×š ×œ×ª×©×œ×•×.</p>

    <div class="item">
      <div>
        <div><strong>×¤×™×¦×” ××™×©×™×ª</strong></div>
        <div class="note">×§×•×˜×¨ 26 ×¡×</div>
      </div>
      <div>â‚ª<span id="price-personal">30</span></div>
      <input type="radio" name="size" value="30" id="size-personal" checked />
    </div>

    <div class="item">
      <div>
        <div><strong>×¤×™×¦×” ××©×¤×—×ª×™×ª</strong></div>
        <div class="note">×§×•×˜×¨ 32 ×¡×</div>
      </div>
      <div>â‚ª<span id="price-family">55</span></div>
      <input type="radio" name="size" value="55" id="size-family" />
    </div>

    <div class="item">
      <div>
        <div><strong>×¤×™×¦×” ×¢× ×§×™×ª</strong></div>
        <div class="note">×§×•×˜×¨ 40 ×¡×</div>
      </div>
      <div>â‚ª<span id="price-large">75</span></div>
      <input type="radio" name="size" value="75" id="size-large" />
    </div>

    <div style="margin-top:12px">
      <label>×ª×•×¡×¤×•×ª (â‚ª5 ×›×œ ××—×ª):</label>
      <div class="toppings">
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×–×™×ª×™×</label>
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×¤×˜×¨×™×•×ª</label>
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×‘×¦×œ</label>
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×ª×™×¨×¡</label>
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×’×‘×™× ×” × ×•×¡×¤×ª</label>
        <label class="topping"><input type="checkbox" class="topping-checkbox" value="5" /> ×¤×¤×¨×•× ×™</label>
      </div>
    </div>

    <div style="margin-top:12px" class="row">
      <div style="flex:1">
        <label for="address">×›×ª×•×‘×ª ×œ××©×œ×•×—</label>
        <input id="address" type="text" placeholder="×¨×—×•×‘, ××¡×¤×¨, ×¢×™×¨" style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc"/>
      </div>
      <div>
        <label for="delivery">×“××™ ××©×œ×•×—</label>
        <input id="delivery" type="number" value="15" min="0" />
      </div>
    </div>

    <div class="total">×¡×”×´×›: â‚ª<span id="total">0</span></div>

    <div style="margin-top:10px" class="row">
      <button id="calc" aria-label="×—×©×‘ ×¡×›×•×">×—×©×‘ ×•×ª×©×œ×•×</button>
      <button id="pay" class="pay" style="display:none" aria-label="×¢×‘×•×¨ ×œ×ª×©×œ×•×">×¢×‘×•×¨ ×œ×ª×©×œ×•×</button>
    </div>

    <p class="note">×›×¤×ª×•×¨ ×”×ª×©×œ×•× ××•×‘×™×œ ×œ×§×™×©×•×¨ ×¡×œ×™×§×” ×—×™×¦×•× ×™ â€” ×”×—×œ×™×¤×• ××ª ××©×ª× ×” <code>paymentLink</code> ×‘-JS ×‘×§×™×©×•×¨ ×©×œ×›× (PayPal.me / Bit / Paybox ×•×›×•').</p>
  </div>

  <script>
    // ××—×™×¨×™× × ×©××¨×™× ×›××—×¨×•×–×•×ª ×‘××¡××š ××š × ×ª×•× ×™× ×œ×—×™×©×•×‘ ×›××¡×¤×¨×™×
    function parsePrice(v){ return Number(v) || 0; }

    function calcTotal(){
      // ×’×•×“×œ
      const sizeRadio = document.querySelector('input[name="size"]:checked');
      const sizePrice = parsePrice(sizeRadio ? sizeRadio.value : 0);

      // ×ª×•×¡×¤×•×ª
      const toppings = Array.from(document.querySelectorAll('.topping-checkbox:checked'));
      const toppingsTotal = toppings.reduce((s,el)=> s + parsePrice(el.value), 0);

      // ××©×œ×•×—
      const delivery = parsePrice(document.getElementById('delivery').value);

      // ×¡×›×•× ×›×•×œ×œ
      const total = sizePrice + toppingsTotal + delivery;

      // ×¢×“×›×•×Ÿ ×ª×¦×•×’×”
      document.getElementById('total').textContent = total.toFixed(2).replace('.00','');

      return total;
    }

    document.getElementById('calc').addEventListener('click', function(){
      const total = calcTotal();

      // ×‘×“×™×§×” ×‘×¡×™×¡×™×ª: ×›×ª×•×‘×ª
      const address = document.getElementById('address').value.trim();
      if(!address){
        if(!confirm('×œ× ×”×•×–× ×” ×›×ª×•×‘×ª ××©×œ×•×—. ×œ×”××©×™×š ×œ×œ× ×›×ª×•×‘×ª?')) return;
      }

      // ×”×¦×’ ×›×¤×ª×•×¨ ×ª×©×œ×•× ×¢× ×”×¡×›×•×
      const payBtn = document.getElementById('pay');
      payBtn.style.display = 'inline-block';
      payBtn.textContent = '×¢×‘×•×¨ ×œ×ª×©×œ×•× (â‚ª' + (Math.round(total*100)/100) + ')';

      // ×©××™×¨×ª ×¤×¨×˜×™ ×”×”×–×× ×” ×‘× ×ª×•× ×™× ×œ×©×™××•×© ×œ××—×¨ ×”×ª×©×œ×•× (× ×™×ª×Ÿ ×œ×©× ×•×ª)
      payBtn.dataset.order = JSON.stringify({
        size: document.querySelector('input[name="size"]:checked').id,
        toppings: Array.from(document.querySelectorAll('.topping-checkbox:checked')).map(n=>n.parentElement.textContent.trim()),
        address: address,
        total: total
      });
    });

    // ×”×—×œ×™×¤×• ××ª ×”×§×™×©×•×¨ ×›××Ÿ ×‘×§×™×©×•×¨ ×”×¡×œ×™×§×” ×©×œ×›×.
    // ××¤×©×¨ ×œ×”×©×ª××© ×‘-PayPal.me: https://www.paypal.me/USERNAME/AMOUNT
    // ××• ×‘×§×™×©×•×¨ Bit/Paybox ×©×œ ×”×¢×¡×§ ×©×œ×›×.
    const paymentLinkTemplate = "https://www.paypal.com/paypalme/YOURNAME/"; // ×”×—×œ×™×¤×• YOURNAME

    document.getElementById('pay').addEventListener('click', function(){
      const data = this.dataset.order ? JSON.parse(this.dataset.order) : null;
      const amount = data ? (Math.round(data.total*100)/100) : calcTotal();
      // ×‘× ×™×™×ª ×§×™×©×•×¨ â€” ×¢×‘×•×¨ PayPal.me ××•×¡×™×¤×™× ××ª ×”×¡×›×•× ×‘×¡×•×£ ×”× ×ª×™×‘
      // ×ª×—×œ×™×¤×• ××ª ×”×œ×•×’×™×§×” ×›××Ÿ ×× ××ª× ×©×•×œ×—×™× ×œ-Bit/Paybox/API ××—×¨.
      const link = paymentLinkTemplate + encodeURIComponent(amount);
      // ×¤×ª×™×—×ª ×”×§×™×©×•×¨ ×‘×—×œ×•×Ÿ/×œ×©×•× ×™×ª ×—×“×©×”
      window.open(link, '_blank');
      // ××¤×©×¨ ×’× ×œ×”×¢×ª×™×§ ×¤×¨×˜×™ ×”×–×× ×” ×œ×œ×•×— â€” ×©×™××•×©×™ ×œ×©×œ×™×—×ª ××™×©×•×¨
      const summary = data ? ("×¤×™×¦×”: " + data.size + "\n×ª×•×¡×¤×•×ª: " + (data.toppings.join(', ') || '×œ×œ×') + "\n×›×ª×•×‘×ª: " + (data.address || '×œ× ×”×•×–× ×”') + "\n×¡×›×•×: â‚ª" + amount) : '';
      // ×”×¦×¢×ª ×”×¢×ª×§
      if(summary && confirm('×”×”×–×× ×” × ×¤×ª×—×” ×‘×¢××•×“ ×”×ª×©×œ×•×. ×œ×”×¢×ª×™×§ ×¤×¨×˜×™ ×”×–×× ×” ×›×“×™ ×œ×©×œ×•×— ×œ×œ×§×•×—?')) {
        navigator.clipboard.writeText(summary).then(()=> alert('×¤×¨×˜×™ ×”×”×–×× ×” ×”×•×¢×ª×§×• ×œ×œ×•×—.'), ()=> alert('×œ× × ×™×ª×Ÿ ×œ×”×¢×ª×™×§ ××•×˜×•××˜×™×ª â€” ×”×¢×ª×™×§×• ×™×“× ×™×ª:\n' + summary));
      }
    });

    // ×—×©×‘ ×¡×”"×› ×›×‘×¨×™×¨×ª ××—×“×œ ×‘×ª×—×™×œ×ª ×”×˜×¢×™× ×”
    calcTotal();
  </script>
</body>
</html>
